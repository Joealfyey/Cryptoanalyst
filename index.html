
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Crypto Analysis - Realtime Harga</title>
<style>
  body {
    font-family: 'Inter', sans-serif;
    background-color: #121212;
    color: #e0e0e0;
    padding: 24px;
    margin: 0;
    min-height: 100vh;
  }
  h1 {
    text-align: center;
    font-weight: 900;
    font-size: 2rem;
    margin-bottom: 24px;
    background: linear-gradient(135deg, #8b5cf6, #06b6d4);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 12px;
  }
  thead tr {
    background-color: #1e1e2f;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
  }
  th, td {
    padding: 12px 16px;
    font-size: 14px;
    border-radius: 12px;
    text-align: center;
  }
  th {
    color: #ccc;
    user-select: none;
  }
  td {
    background-color: #222239;
    vertical-align: middle;
  }
  td[contenteditable="true"] {
    background-color: #2e2e48;
    outline-offset: 2px;
    outline-color: #06b6d4;
    outline-style: solid;
    outline-width: 0;
    cursor: text;
    transition: outline-width 0.25s ease;
  }
  td[contenteditable="true"]:focus {
    outline-width: 2px;
  }
  td.price {
    font-weight: 700;
    color: #8b5cf6;
    user-select: none;
  }
  td.signal {
    font-weight: 700;
    font-size: 13px;
    white-space: nowrap;
    user-select: none;
  }
  @media (max-width: 768px) {
    table, thead, tbody, th, td, tr {
      display: block;
    }
    thead tr {
      display: none;
    }
    tr {
      background: #222239;
      margin-bottom: 16px;
      border-radius: 16px;
      padding: 12px 16px;
    }
    td {
      position: relative;
      padding-left: 50%;
      text-align: right;
      font-size: 13px;
    }
    td::before {
      position: absolute;
      left: 16px;
      top: 12px;
      width: 45%;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      content: attr(data-label);
      font-weight: 700;
      text-transform: uppercase;
      font-size: 12px;
      color: #a0a0a0;
    }
    td[contenteditable="true"] {
      outline-offset: 1px;
    }
    td.price, td.signal {
      text-align: left;
    }
  }
</style>
</head>
<body>
<h1>Crypto Analysis - Realtime Harga</h1>
<table id="cryptoTable" role="grid" aria-label="Tabel Analisa Crypto">
  <thead>
    <tr>
      <th scope="col">Coin</th>
      <th scope="col">Harga Sekarang (USD)</th>
      <th scope="col">Support Low (USD)</th>
      <th scope="col">Support High (USD)</th>
      <th scope="col">RSI Weekly</th>
      <th scope="col">Signal</th>
    </tr>
  </thead>
  <tbody>
    <tr><td contenteditable="true">bitcoin</td><td class="price">-</td><td contenteditable="true">74000</td><td contenteditable="true">73800</td><td contenteditable="true">65.81</td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">ethereum</td><td class="price">-</td><td contenteditable="true">2275</td><td contenteditable="true">1960</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">solana</td><td class="price">-</td><td contenteditable="true">142</td><td contenteditable="true">144</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">avalanche</td><td class="price">-</td><td contenteditable="true">18.50</td><td contenteditable="true">16</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">bittensor</td><td class="price">-</td><td contenteditable="true">212</td><td contenteditable="true">230</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">artificial superintelligence alliance</td><td class="price">-</td><td contenteditable="true">0.70</td><td contenteditable="true">0.80</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">render</td><td class="price">-</td><td contenteditable="true">3.35</td><td contenteditable="true">4.15</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">sui</td><td class="price">-</td><td contenteditable="true">2.70</td><td contenteditable="true">3.00</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">arweave</td><td class="price">-</td><td contenteditable="true">12.50</td><td contenteditable="true">16.50</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">ethena</td><td class="price">-</td><td contenteditable="true">0.30</td><td contenteditable="true">0.32</td><td contenteditable="true"></td><td class="signal">-</td></tr>
    <tr><td contenteditable="true">jupiter</td><td class="price">-</td><td contenteditable="true">0.43</td><td contenteditable="true">0.48</td><td contenteditable="true"></td><td class="signal">-</td></tr>
  </tbody>
</table>
<script>
  const coinGeckoIds = {
    bitcoin: 'bitcoin',
    ethereum: 'ethereum',
    solana: 'solana',
    avalanche: 'avalanche-2',
    bittensor: 'bittensor',
    'artificial superintelligence alliance': 'artificial-superintelligence-alliance',
    render: 'render-token',
    sui: 'sui',
    arweave: 'arweave',
    ethena: 'ethena',
    jupiter: 'jupiter',
  };

  function parseFloatCell(cell) {
    const n = parseFloat(cell.textContent.replace(/,/g, '.'));
    return isNaN(n) ? null : n;
  }

  async function updatePricesAndSignals() {
    const rows = document.querySelectorAll('#cryptoTable tbody tr');
    for (const row of rows) {
      const coinCell = row.cells[0];
      const priceCell = row.querySelector('.price');
      const supportLowCell = row.cells[2];
      const supportHighCell = row.cells[3];
      const signalCell = row.querySelector('.signal');

      const coinName = coinCell.textContent.trim().toLowerCase();
      const coinId = coinGeckoIds[coinName] || coinName;

      try {
        const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${encodeURIComponent(coinId)}&vs_currencies=usd`);
        const data = await response.json();
        const price = data[coinId]?.usd;
        if (price !== undefined) {
          priceCell.textContent = price.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 6});
        } else {
          priceCell.textContent = '--';
        }
      } catch (e) {
        priceCell.textContent = '--';
      }

      const priceNum = parseFloat(priceCell.textContent.replace(/,/g, '.'));
      const low = parseFloatCell(supportLowCell);
      const high = parseFloatCell(supportHighCell);

      if (priceNum !== null && low !== null && high !== null) {
        const minSupport = Math.min(low, high);
        const maxSupport = Math.max(low, high);
        signalCell.textContent = (priceNum >= minSupport && priceNum <= maxSupport) ? 'ðŸŸ¢ BUY ZONE' : '';
      } else {
        signalCell.textContent = '';
      }
    }
  }

  function debounce(fn, ms) {
    let timer;
    return () => {
      clearTimeout(timer);
      timer = setTimeout(fn, ms);
    };
  }

  function setupListeners() {
    const editableCells = document.querySelectorAll('td[contenteditable="true"]');
    editableCells.forEach(cell => {
      cell.addEventListener('input', debounce(updatePricesAndSignals, 700));
    });
  }

  updatePricesAndSignals();
  setupListeners();
  setInterval(updatePricesAndSignals, 300000);
</script>
</body>
</html>
